{% extends 'base.html' %}
{% load static %}
{%block content%}
	<div class="izq">
		<a href="{% url 'editar_activo' activo.TAid %}" class="btn btn-warning sep font-weight-bold"><i class="far fa-edit"></i> Editar</a>
		<a href="{% url 'eliminar_activo' activo.TAid %}" class="btn btn-danger sep font-weight-bold"><i class="fas fa-minus-circle"></i> Eliminar</a>
		<a href="{% url 'lista_activos' %}" class="btn btn-dark sep font-weight-bold"><i class="fas fa-arrow-circle-left"></i> Volver a Lista de Activos</a>
	</div>
	<h2>#{{activo.TAid}} {{activo.nombre}}</h2>
	
	<div>
		<p>Responsable de Seguridad: {{activo.rs}}<p>
		<p>Tipo de Activo: {{activo.tipoactivo}}</p>
		<p>Nombre Activo: {{activo.nombre}}</p>
		<p>Descripción del activo: {{activo.descripcion}}</p>
		<p>Propietario del Activo: {{activo.propietario}}</p>
		<p>Ubicación del Activo: {{activo.ubicacion}}</p>
		<p>Valor de Riesgo del activo: {{activo.valor}}</p>	
		<p>{{activo.date}}</p>
		<p><a href="{{activo.informe_url|default_if_none:'#'}}" class="link-n" target="_blank">Ver informe <i class="far fa-file"></i></a></p>
	</div>
	<div class="der">
		<a href="{% url 'nueva_amenaza' activo.TAid %}" class="btn btn-success sep font-weight-bold"><i class="fas fa-plus-circle"></i> Añadir Amenaza</a>
	</div>
	<div>
		{% for amenaza in amenaza_activos %}
           valor: {{amenaza}} {{amenaza.amenaza}}
           <p>riesgo: {{amenaza.riesgo}}</p>
        {% endfor %}
	</div>
	<small style="color:red"> Listar Amenazas de este activo aca?</small>
	<section style="width:70%; margin:auto;">
		<canvas id="analisis"></canvas>
	</section>
	<script>
var ctx = document.getElementById('analisis').getContext('2d');
    {% for amenaza in amenaza_activos %}
        console.log('{{amenaza.amenaza}}');
    {%endfor%}
var myChart = new Chart(ctx, {
    type: 'line',
    data: {
        labels: [
        {% for amenaza in amenaza_activos %}
            '{{amenaza.amenaza}}',
        {%endfor%}],
        datasets: [{
            label: 'Analisis',
            data: [{% for amenaza in amenaza_activos %}
                {{amenaza.riesgo}},
            {%endfor%}],
            borderColor: [
                'rgba(255, 99, 132, 1)',
                'rgba(54, 162, 235, 1)',
                'rgba(255, 206, 86, 1)',
                'rgba(75, 192, 192, 1)',
                'rgba(153, 102, 255, 1)',
                'rgba(255, 159, 64, 1)'
            ],
            fill:false,
            lineTension:0,
            borderWidth: 1
        }]
    },
    options: {
        scales: {
            yAxes: [{
                ticks: {
                    beginAtZero: true
                }
            }]
        }
    }
});
</script>
{%endblock content%}